function iniciarApp(){getCitas()}function getCitas(){const t=document.querySelectorAll(".anular-cita");document.querySelectorAll(".mi-cita").forEach(t=>{let e=t.textContent.split(" ")[1],n=t.textContent.split(" ")[2];fechaTexto=formatearFecha(e)+" a las "+n+" horas",t.textContent=fechaTexto}),t.forEach(t=>{const e=t.parentElement.firstElementChild.value;t.addEventListener("click",(function(){anularCita(e)}))})}function formatearFecha(t){const e=new Date(t),n=e.getMonth(),a=e.getDate(),o=e.getFullYear();return new Date(Date.UTC(o,n,a)).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}async function anularCita(t){const e=new FormData;e.append("id",t);const n=window.location.origin;try{const t=n+"/api/citas/eliminar",a=await fetch(t,{method:"POST",body:e});(await a.json()).resultado&&Swal.fire({icon:"success",title:"Cita eliminada",text:"La cita se ha eliminado correctamente",button:"Ok"}).then(()=>{window.location.reload()})}catch{Swal.fire({icon:"error",title:"Ops...",text:"Ha ocurrido un error al eliminar la cita...IntÃ©ntelo de nuevo pasados unos minutos",button:"Ok"}).then(()=>{window.location.reload()})}}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));